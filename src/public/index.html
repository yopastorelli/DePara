<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DePara - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="material-icons">data_object</span>
                <h1>DePara</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-tab="dashboard">
                    <span class="material-icons">dashboard</span>
                    Dashboard
                </button>
                <button class="nav-btn" data-tab="folders">
                    <span class="material-icons">folder</span>
                    Pastas
                </button>
                <button class="nav-btn" data-tab="conversion">
                    <span class="material-icons">transform</span>
                    Convers√£o
                </button>
                <button class="nav-btn" data-tab="mapping">
                    <span class="material-icons">map</span>
                    Mapeamento
                </button>
                <button class="nav-btn" data-tab="settings">
                    <span class="material-icons">settings</span>
                    Configura√ß√µes
                </button>
            </nav>
            <!-- NOVO: Bot√£o de Ajuda -->
            <button class="help-btn" onclick="showOnboarding()" title="Ajuda e Tutorial">
                <span class="material-icons">help</span>
            </button>
        </div>
    </header>

    <!-- NOVO: Sistema de Onboarding -->
    <div id="onboarding-overlay" class="onboarding-overlay" style="display: none;">
        <div class="onboarding-content">
            <div class="onboarding-header">
                <h2>Bem-vindo ao DePara! üéâ</h2>
                <p>Vamos configurar sua primeira pasta em 3 passos simples</p>
            </div>
            
            <div class="onboarding-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Nome e Localiza√ß√£o</h3>
                        <p>D√™ um nome para sua pasta e escolha onde ela est√° no computador</p>
                        <div class="step-example">
                            <strong>Exemplo:</strong> "Dados_Entrada" em "/home/usuario/dados"
                        </div>
                    </div>
                </div>
                
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Tipo e Formato</h3>
                        <p>Defina se √© pasta de entrada, sa√≠da ou tempor√°ria e o formato dos arquivos</p>
                        <div class="step-example">
                            <strong>Exemplo:</strong> Pasta de entrada que aceita arquivos CSV
                        </div>
                    </div>
                </div>
                
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Processamento Autom√°tico</h3>
                        <p>Configure como e quando processar os arquivos automaticamente</p>
                        <div class="step-example">
                            <strong>Exemplo:</strong> Processar a cada 5 minutos quando novos arquivos chegarem
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="onboarding-actions">
                <button class="btn btn-secondary" onclick="skipOnboarding()">Pular Tutorial</button>
                <button class="btn btn-primary" onclick="startOnboarding()">Come√ßar Configura√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <!-- Status Card -->
                <div class="card status-card">
                    <div class="card-header">
                        <h3>Status do Sistema</h3>
                        <span class="status-indicator online"></span>
                    </div>
                    <div class="card-content">
                        <div class="status-item">
                            <span class="material-icons">memory</span>
                            <div>
                                <span class="label">Mem√≥ria</span>
                                <span class="value" id="memory-usage">--</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="material-icons">storage</span>
                            <div>
                                <span class="label">Disco</span>
                                <span class="value" id="disk-usage">--</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="material-icons">thermostat</span>
                            <div>
                                <span class="label">Temperatura</span>
                                <span class="value" id="cpu-temp">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Card -->
                <div class="card actions-card">
                    <div class="card-header">
                        <h3>A√ß√µes R√°pidas</h3>
                    </div>
                    <div class="card-content">
                        <button class="action-btn" onclick="openFolderConfig()">
                            <span class="material-icons">add_folder</span>
                            Nova Pasta
                        </button>
                        <button class="action-btn" onclick="openConversion()">
                            <span class="material-icons">file_upload</span>
                            Converter Arquivo
                        </button>
                        <button class="action-btn" onclick="openMapping()">
                            <span class="material-icons">schema</span>
                            Criar Mapeamento
                        </button>
                    </div>
                </div>

                <!-- Recent Activity Card -->
                <div class="card activity-card">
                    <div class="card-header">
                        <h3>Atividade Recente</h3>
                    </div>
                    <div class="card-content">
                        <div id="recent-activity" class="activity-list">
                            <div class="activity-item">
                                <span class="material-icons">info</span>
                                <span>Nenhuma atividade recente</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Folders Tab -->
        <div id="folders" class="tab-content">
            <div class="folders-container">
                <div class="folders-header">
                    <h2>Configura√ß√£o de Pastas</h2>
                    <button class="btn btn-primary" onclick="openFolderConfig()">
                        <span class="material-icons">add</span>
                        Nova Pasta
                    </button>
                </div>
                
                <div class="folders-grid" id="folders-grid">
                    <!-- Pastas ser√£o carregadas dinamicamente -->
                </div>
            </div>
        </div>

        <!-- Conversion Tab -->
        <div id="conversion" class="tab-content">
            <div class="conversion-container">
                <h2>Convers√£o de Dados</h2>
                <div class="conversion-form">
                    <div class="form-group">
                        <label>Formato de Origem</label>
                        <select id="source-format">
                            <option value="csv">CSV</option>
                            <option value="json">JSON</option>
                            <option value="xml">XML</option>
                            <option value="yaml">YAML</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Formato de Destino</label>
                        <select id="target-format">
                            <option value="json">JSON</option>
                            <option value="csv">CSV</option>
                            <option value="xml">XML</option>
                            <option value="yaml">YAML</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Arquivo ou Dados</label>
                        <textarea id="conversion-data" placeholder="Cole seus dados aqui ou arraste um arquivo..."></textarea>
                        <input type="file" id="file-input" accept=".csv,.json,.xml,.yaml,.txt" style="display: none;">
                        <button class="btn btn-secondary" onclick="document.getElementById('file-input').click()">
                            <span class="material-icons">upload_file</span>
                            Escolher Arquivo
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="convertData()">
                        <span class="material-icons">transform</span>
                        Converter
                    </button>
                </div>
                <div id="conversion-result" class="conversion-result" style="display: none;">
                    <!-- Resultado da convers√£o ser√° exibido aqui -->
                </div>
            </div>
        </div>

        <!-- Mapping Tab -->
        <div id="mapping" class="tab-content">
            <div class="mapping-container">
                <h2>Mapeamento de Campos</h2>
                <div class="mapping-form">
                    <div class="form-group">
                        <label>Campos de Origem</label>
                        <input type="text" id="source-fields" placeholder="nome,idade,email (separados por v√≠rgula)">
                    </div>
                    <div class="form-group">
                        <label>Campos de Destino</label>
                        <input type="text" id="target-fields" placeholder="name,age,email (separados por v√≠rgula)">
                    </div>
                    <div class="form-group">
                        <label>Dados de Exemplo (opcional)</label>
                        <textarea id="mapping-data" placeholder='[{"nome": "Jo√£o", "idade": 25, "email": "joao@email.com"}]'></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="generateMapping()">
                        <span class="material-icons">auto_fix_high</span>
                        Gerar Mapeamento
                    </button>
                </div>
                <div id="mapping-result" class="mapping-result" style="display: none;">
                    <!-- Resultado do mapeamento ser√° exibido aqui -->
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="settings-container">
                <h2>Configura√ß√µes do Sistema</h2>
                <div class="settings-form">
                    <div class="form-group">
                        <label>Porta da Aplica√ß√£o</label>
                        <input type="number" id="app-port" value="3000" min="1024" max="65535">
                    </div>
                    <div class="form-group">
                        <label>N√≠vel de Log</label>
                        <select id="log-level">
                            <option value="error">Erro</option>
                            <option value="warn">Aviso</option>
                            <option value="info" selected>Informa√ß√£o</option>
                            <option value="debug">Debug</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ambiente</label>
                        <select id="environment">
                            <option value="development">Desenvolvimento</option>
                            <option value="production" selected>Produ√ß√£o</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Diret√≥rio de Logs</label>
                        <input type="text" id="log-directory" value="logs/">
                    </div>
                    <button class="btn btn-primary" onclick="saveSettings()">
                        <span class="material-icons">save</span>
                        Salvar Configura√ß√µes
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="folder-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configurar Nova Pasta</h3>
                <button class="modal-close" onclick="closeFolderModal()">
                    <span class="material-icons">close</span>
                </button>
            </div>
            
            <!-- NOVO: Wizard de Configura√ß√£o em Etapas -->
            <div class="modal-body">
                <!-- Etapa 1: Informa√ß√µes B√°sicas -->
                <div class="wizard-step active" data-step="1">
                    <h4 class="step-title">
                        <span class="material-icons">folder</span>
                        Informa√ß√µes B√°sicas
                    </h4>
                    
                    <div class="form-group">
                        <label>Nome da Pasta</label>
                        <input type="text" id="folder-name" placeholder="Ex: Dados_Entrada" 
                               oninput="validateField(this, 'name')">
                        <small class="form-help">Nome descritivo para identificar a pasta</small>
                        <div class="validation-message" id="name-validation"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Caminho da Pasta</label>
                        <input type="text" id="folder-path" placeholder="/home/yo/dados/entrada" 
                               oninput="validateField(this, 'path')">
                        <small class="form-help">Caminho completo onde a pasta est√° localizada</small>
                        <div class="validation-message" id="path-validation"></div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tipo de Monitoramento</label>
                            <select id="folder-type" onchange="updateTypeHelp()">
                                <option value="input">üì• Pasta de Entrada</option>
                                <option value="output">üì§ Pasta de Sa√≠da</option>
                                <option value="temp">üóÇÔ∏è Pasta Tempor√°ria</option>
                            </select>
                            <small class="form-help" id="type-help">Pasta onde arquivos chegam para processamento</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Formato de Arquivo</label>
                            <select id="folder-format">
                                <option value="auto">üîç Detectar Automaticamente</option>
                                <option value="csv">üìä CSV</option>
                                <option value="json">üìã JSON</option>
                                <option value="xml">üìÑ XML</option>
                                <option value="yaml">‚öôÔ∏è YAML</option>
                            </select>
                            <small class="form-help">Formato dos arquivos que ser√£o processados</small>
                        </div>
                    </div>
                </div>
                
                <!-- Etapa 2: Processamento Autom√°tico -->
                <div class="wizard-step" data-step="2">
                    <h4 class="step-title">
                        <span class="material-icons">auto_fix_high</span>
                        Processamento Autom√°tico
                    </h4>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-process" onchange="toggleProcessingOptions()">
                            <span>Processar arquivos automaticamente</span>
                        </label>
                        <small class="form-help">Quando ativado, arquivos s√£o processados assim que chegam</small>
                    </div>
                    
                    <div id="processing-options" style="display: none;">
                        <div class="form-group">
                            <label>Frequ√™ncia de Processamento</label>
                            <select id="processing-frequency" onchange="toggleCronField()">
                                <option value="realtime">‚ö° Tempo Real (Imediato)</option>
                                <option value="1min">‚è±Ô∏è A cada 1 minuto</option>
                                <option value="5min">‚è±Ô∏è A cada 5 minutos</option>
                                <option value="15min">‚è±Ô∏è A cada 15 minutos</option>
                                <option value="30min">‚è±Ô∏è A cada 30 minutos</option>
                                <option value="1hour">‚è∞ A cada 1 hora</option>
                                <option value="6hours">‚è∞ A cada 6 horas</option>
                                <option value="12hours">‚è∞ A cada 12 horas</option>
                                <option value="daily">üìÖ Di√°rio (00:00)</option>
                                <option value="weekly">üìÖ Semanal (Domingo 00:00)</option>
                                <option value="monthly">üìÖ Mensal (1¬∫ dia 00:00)</option>
                                <option value="custom">‚öôÔ∏è Personalizado (Cron)</option>
                            </select>
                            <small class="form-help">Com que frequ√™ncia verificar e processar arquivos</small>
                        </div>
                        
                        <div class="form-group" id="cron-group" style="display: none;">
                            <label>Express√£o Cron Personalizada</label>
                            <input type="text" id="cron-expression" placeholder="*/5 * * * * (a cada 5 minutos)">
                            <small class="form-help">
                                <strong>Formato:</strong> minuto hora dia m√™s dia_semana<br>
                                <strong>Exemplos:</strong> */5 * * * * (5min) | 0 */2 * * * (2h) | 0 0 * * 0 (semanal)
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Etapa 3: Regras e Transforma√ß√µes -->
                <div class="wizard-step" data-step="3">
                    <h4 class="step-title">
                        <span class="material-icons">tune</span>
                        Regras e Transforma√ß√µes
                    </h4>
                    
                    <div class="form-group">
                        <label>Regras de Processamento</label>
                        <select id="processing-rules" onchange="toggleExtensionField()">
                            <option value="all">‚úÖ Processar Todos os Arquivos</option>
                            <option value="new">üÜï Apenas Arquivos Novos</option>
                            <option value="modified">üìù Apenas Arquivos Modificados</option>
                            <option value="size">üìè Por Tamanho (maior que 1MB)</option>
                            <option value="extension">üîç Por Extens√£o Espec√≠fica</option>
                        </select>
                        <small class="form-help">Quais arquivos devem ser processados</small>
                    </div>
                    
                    <div class="form-group" id="extension-group" style="display: none;">
                        <label>Extens√µes Permitidas</label>
                        <input type="text" id="allowed-extensions" placeholder="csv,json,xml (separadas por v√≠rgula)">
                        <small class="form-help">Liste as extens√µes de arquivo que devem ser processadas</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Transforma√ß√µes Aplicadas</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="transform-trim" checked>
                                <span>üßπ Remover Espa√ßos em Branco</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="transform-validate">
                                <span>‚úÖ Validar Dados</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="transform-uppercase" onchange="toggleCaseConflict()">
                                <span>üî† Converter para Mai√∫sculas</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="transform-lowercase" onchange="toggleCaseConflict()">
                                <span>üî§ Converter para Min√∫sculas</span>
                            </label>
                        </div>
                        <small class="form-help">Transforma√ß√µes que ser√£o aplicadas aos dados</small>
                    </div>
                </div>
                
                <!-- Etapa 4: Configura√ß√µes de Sa√≠da -->
                <div class="wizard-step" data-step="4">
                    <h4 class="step-title">
                        <span class="material-icons">output</span>
                        Configura√ß√µes de Sa√≠da
                    </h4>
                    
                    <div class="form-group">
                        <label>Op√ß√µes de Processamento</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="output-backup" checked>
                                <span>üíæ Criar Backup Original</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="output-log" checked>
                                <span>üìù Gerar Log de Processamento</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="output-notify">
                                <span>üîî Notificar Conclus√£o</span>
                            </label>
                        </div>
                        <small class="form-help">A√ß√µes adicionais durante o processamento</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Resumo da Configura√ß√£o</label>
                        <div id="config-summary" class="config-summary">
                            <!-- Resumo ser√° preenchido dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- NOVO: Navega√ß√£o do Wizard -->
            <div class="modal-footer">
                <div class="wizard-navigation">
                    <button class="btn btn-secondary" id="prev-step" onclick="previousStep()" style="display: none;">
                        <span class="material-icons">arrow_back</span>
                        Anterior
                    </button>
                    
                    <div class="step-indicators">
                        <span class="step-dot active" data-step="1"></span>
                        <span class="step-dot" data-step="2"></span>
                        <span class="step-dot" data-step="3"></span>
                        <span class="step-dot" data-step="4"></span>
                    </div>
                    
                    <button class="btn btn-primary" id="next-step" onclick="nextStep()">
                        Pr√≥ximo
                        <span class="material-icons">arrow_forward</span>
                    </button>
                    
                    <button class="btn btn-success" id="save-step" onclick="saveFolder()" style="display: none;">
                        <span class="material-icons">save</span>
                        Salvar Pasta
                    </button>
                </div>
                
                <button class="btn btn-secondary" onclick="closeFolderModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>
